CREATE TABLE Produit(
   PRD_ID INT,
   PRD_DESCRIPTION VARCHAR(50) NOT NULL,
   PRD_GUARANTEE INT NOT NULL,
   PRD_PICTURE VARCHAR(50) NOT NULL,
   PRD_NOTE INT NOT NULL,
   PRD_PRICE DECIMAL(9,2) NOT NULL,
   PRIMARY KEY(PRD_ID)
);

CREATE TABLE Type_Produit(
   PTY_ID INT,
   PTY_DESCRIPTION VARCHAR(80) COLLATE Unitaire ou Lot NOT NULL,
   QUANTITE_ARTICLE_LOT INT NOT NULL,
   PRIMARY KEY(PTY_ID)
);

CREATE TABLE Fournisseur(
   SPL_ID INT,
   SPL_NAME VARCHAR(50) NOT NULL,
   PRIMARY KEY(SPL_ID)
);

CREATE TABLE adresse_facturation(
   ADR_F_ID INT,
   ADR_F_LASTNAME VARCHAR(50),
   ADR_F_FIRSTNAME VARCHAR(50) NOT NULL,
   ADR_F_LINE1 VARCHAR(50) NOT NULL,
   ADR_F_LINE2 VARCHAR(50),
   ADR_F_LINE3 VARCHAR(50),
   ADR_F_CITY VARCHAR(50) NOT NULL,
   ADR_F_ZIPCODE VARCHAR(5) NOT NULL,
   ADR_F_COUNTRY VARCHAR(50) NOT NULL,
   ADR_F_MAIL VARCHAR(50) NOT NULL,
   ADR_F_PHONE VARCHAR(50) NOT NULL,
   PRIMARY KEY(ADR_F_ID)
);

CREATE TABLE Type_de_paiement(
   PMT_ID INT,
   PMT_WORDING VARCHAR(50) NOT NULL,
   PRIMARY KEY(PMT_ID)
);

CREATE TABLE Expedition(
   EXP_ID INT,
   EXP_WEIGTH DECIMAL(9,2) NOT NULL,
   EXP_TRACKINGNUMBER VARCHAR(50) NOT NULL,
   EXP_SENTDATE DATE NOT NULL,
   ADR_F_ID INT NOT NULL,
   SPL_ID INT NOT NULL,
   PRIMARY KEY(EXP_ID),
   UNIQUE(ADR_F_ID),
   FOREIGN KEY(ADR_F_ID) REFERENCES adresse_facturation(ADR_F_ID),
   FOREIGN KEY(SPL_ID) REFERENCES Fournisseur(SPL_ID)
);

CREATE TABLE Statut_commande(
   OSS_ID INT,
   OSS_WORDING VARCHAR(50) NOT NULL,
   PRIMARY KEY(OSS_ID)
);

CREATE TABLE adresse_livraison(
   ADR_D_ID INT,
   ADR_D_FIRSTNAME VARCHAR(50) NOT NULL,
   ADR_D_LASTNAME VARCHAR(50),
   ADR_D_LINE1 VARCHAR(50) NOT NULL,
   ADR_D_LINE2 VARCHAR(50),
   ADR_D_LINE3 VARCHAR(50),
   ADR_D_CITY VARCHAR(50) NOT NULL,
   ADR_D_ZIPCODE VARCHAR(5) NOT NULL,
   ADR_D_COUNTRY VARCHAR(50) NOT NULL,
   ADR_D_MAIL VARCHAR(50) NOT NULL,
   ADR_D_PHONE VARCHAR(50) NOT NULL,
   PRIMARY KEY(ADR_D_ID)
);

CREATE TABLE Type_expedition(
   ETY_ID INT,
   ETY_WORDING VARCHAR(50) NOT NULL,
   PRIMARY KEY(ETY_ID)
);

CREATE TABLE Client(
   USR_ID INT,
   USR_MAIL VARCHAR(50) NOT NULL,
   USR_PASSWORD VARCHAR(50) NOT NULL,
   USR_FIRSTNAME VARCHAR(50) NOT NULL,
   USR_LASTNAME VARCHAR(50) NOT NULL,
   ETY_ID INT NOT NULL,
   PMT_ID INT NOT NULL,
   PRIMARY KEY(USR_ID),
   UNIQUE(ETY_ID),
   UNIQUE(PMT_ID),
   FOREIGN KEY(ETY_ID) REFERENCES Type_expedition(ETY_ID),
   FOREIGN KEY(PMT_ID) REFERENCES Type_de_paiement(PMT_ID)
);

CREATE TABLE Commande(
   OHR_ID INT,
   OHR_NUMBER VARCHAR(50) NOT NULL,
   OHR_VAT DECIMAL(9,2) NOT NULL,
   OHR_PORT DECIMAL(9,2) NOT NULL,
   QUANTITE_COMMANDEE INT NOT NULL,
   OHR_DATE DATE NOT NULL,
   EST_ANNULEE LOGICAL,
   ADR_F_ID INT NOT NULL,
   USR_ID INT NOT NULL,
   PRIMARY KEY(OHR_ID),
   FOREIGN KEY(ADR_F_ID) REFERENCES adresse_facturation(ADR_F_ID),
   FOREIGN KEY(USR_ID) REFERENCES Client(USR_ID)
);

CREATE TABLE TYPE1(
   PRD_ID INT,
   PTY_ID INT,
   PRIMARY KEY(PRD_ID, PTY_ID),
   FOREIGN KEY(PRD_ID) REFERENCES Produit(PRD_ID),
   FOREIGN KEY(PTY_ID) REFERENCES Type_Produit(PTY_ID)
);

CREATE TABLE PARTIE_COMPORTE1(
   EXP_ID INT,
   OHR_ID INT,
   PRIMARY KEY(EXP_ID, OHR_ID),
   FOREIGN KEY(EXP_ID) REFERENCES Expedition(EXP_ID),
   FOREIGN KEY(OHR_ID) REFERENCES Commande(OHR_ID)
);

CREATE TABLE PARTIE_COMPORTE2(
   PRD_ID INT,
   OHR_ID INT,
   PRIMARY KEY(PRD_ID, OHR_ID),
   FOREIGN KEY(PRD_ID) REFERENCES Produit(PRD_ID),
   FOREIGN KEY(OHR_ID) REFERENCES Commande(OHR_ID)
);

CREATE TABLE DEFINIT1(
   OHR_ID INT,
   OSS_ID INT,
   PRIMARY KEY(OHR_ID, OSS_ID),
   FOREIGN KEY(OHR_ID) REFERENCES Commande(OHR_ID),
   FOREIGN KEY(OSS_ID) REFERENCES Statut_commande(OSS_ID)
);

CREATE TABLE DEFINIT3(
   USR_ID INT,
   ADR_D_ID INT,
   PRIMARY KEY(USR_ID, ADR_D_ID),
   FOREIGN KEY(USR_ID) REFERENCES Client(USR_ID),
   FOREIGN KEY(ADR_D_ID) REFERENCES adresse_livraison(ADR_D_ID)
);

CREATE TABLE DEFINIT4(
   USR_ID INT,
   ADR_F_ID INT,
   PRIMARY KEY(USR_ID, ADR_F_ID),
   FOREIGN KEY(USR_ID) REFERENCES Client(USR_ID),
   FOREIGN KEY(ADR_F_ID) REFERENCES adresse_facturation(ADR_F_ID)
);

CREATE TABLE PROPOSE(
   SPL_ID INT,
   ETY_ID INT,
   PRIMARY KEY(SPL_ID, ETY_ID),
   FOREIGN KEY(SPL_ID) REFERENCES Fournisseur(SPL_ID),
   FOREIGN KEY(ETY_ID) REFERENCES Type_expedition(ETY_ID)
);
